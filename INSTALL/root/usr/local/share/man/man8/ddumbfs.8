.TH "DDUMBFS" "8" "January 11, 2013" "1.0" "ddumbfs"
.SH NAME
ddumbfs \- command line tools to mount a ddumbfs filesystem
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.\" Man page generated from reStructeredText.
.
.SH SYNOPSIS
.sp
\fBddumbfs\fP [\-C] \-o <mount options> <mount\-point>
.SH DESCRIPTION
.sp
\fBddumbfs\fP mount a \fIddumbfs\fP filesystem
.sp
\fIddumbfs\fP is a filesystem that performs inline data deduplication.
\fIddumbfs\fP uses the SHA1 or TIGER hash algorithm to compare the blocks of data
.sp
The \fIparent\-directory\fP is the directory containing the \fIddfs.cfg\fP file and
\fIddfsroot\fP directory.
.SH OPTIONS
.INDENT 0.0
.TP
.B \-h, \-\-help
Show help message and exit.
.UNINDENT
.INDENT 0.0
.TP
.B \-C
Do a filesystem check and quit without mounting the filesystem.
.UNINDENT
.INDENT 0.0
.TP
.B \-o <opt[,opt...]>
mount options:
.INDENT 7.0
.INDENT 3.5
\fIparent=<parent\-directory>\fP
.INDENT 0.0
.INDENT 3.5
\fBparent\-directory\fP is the directory where are the \fIddfs.cfg\fP
file and \fIddfsroot\fP directory. This option is \fBmandatory\fP
.UNINDENT
.UNINDENT
.sp
\fIpool=<num>\fP
.INDENT 0.0
.INDENT 3.5
\fBnum\fP is the number of CPUs to allocate to the pool of \fIwriters\fP.
Use \fBnum=0\fP to \fIdisable\fP the pool and let each process write data itself.
.sp
If \fBnum>0\fP this the the number of writer to start. Don\(aqt use value
bigger than 2*CPUs.
.sp
If \fBnum<0\fP then the formula \-\fBnum\fP /100*N°CPUs is used.
.sp
For example if you have a \fIquad core\fP:
.TS
center;
|l|l|l|l|.
_
T{
num
T}	T{
N° cpus
T}	T{
num
T}	T{
N° cpus
T}
_
T{
\-25
T}	T{
5*0.25=1
T}	T{
\-100
T}	T{
4*1.00=4
T}
_
T{
\-50
T}	T{
4*0.50=2
T}	T{
\-150
T}	T{
4*1.50=6
T}
_
.TE
.sp
default is \-100
.UNINDENT
.UNINDENT
.sp
\fI[no]lock_index\fP
.INDENT 0.0
.INDENT 3.5
Default is to lock the index in memory. This will speed up the
filesystem, because access to the index don\(aqt require access to the disk.
If the index to too big to stay in memory, the lock will fail but
the mount will continue. Read special file \fI/.ddumbfs/stats\fP to
get the status of the mounted filesystem.
.UNINDENT
.UNINDENT
.sp
\fI[no]dio\fP
.INDENT 0.0
.INDENT 3.5
Enable or disable \fIdiretc io\fP access to the \fIBlock File\fP. Use of \fIDirect io\fP
can give a small performance improvement when \fIBlock File\fP is a block device,
and often give \fBpoor\fP performance when it is a regular file.
Default is to enable \fIdirect io\fP when the \fIBlock File\fP is a block device.
The idea is to avoid to pollute the cache with data that will probably be used
only once. This is good for file archiving and backups.
When blocks are small ( 4k ), disable \fIdirect io\fP will increase performance.
.UNINDENT
.UNINDENT
.sp
\fIreclaim=<num>\fP
.INDENT 0.0
.INDENT 3.5
\fBnum\fP is the disk usage in % above what a \fIreclaim\fP is managed.
If disk usage continues to increase then a \fIreclaim\fP is managed
every \fIhalf way\fP up to 100%. Default is 90.
.UNINDENT
.UNINDENT
.sp
\fIcheck\fP
.INDENT 0.0
.INDENT 3.5
force a filesystem check at startup
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.sp
Read the fuse documentation for other fuse related options.
.UNINDENT
.SH EXAMPLES
.INDENT 0.0
.INDENT 3.5
Mounting a ddumbfs is very simple:
.sp
.nf
.ft C
ddumbfs \-o parent=/data/ddfs /ddumbfs
.ft P
.fi
.sp
To reclaim free space after file deletion, you have to start the reclaim
procedure. Just access the \fBspecial\fP \fIreclaim\fP file:
.sp
.nf
.ft C
cat /ddumbfs/.ddumbfs/reclaim
.ft P
.fi
.sp
You can display statistics:
.sp
.nf
.ft C
cat /ddumbfs/.ddumbfs/stats
.ft P
.fi
.UNINDENT
.UNINDENT
.SH SEE ALSO
.sp
\fIfsckddumbfs(1)\fP, \fImkddumbfs(8)\fP, \fIcpddumbfs(1)\fP
.SH AUTHOR
.sp
Alain Spineux <\fI\%alain.spineux@gmail.com\fP>
.SH AUTHOR
Alain Spineux
.SH COPYRIGHT
2011, Alain Spineux
.\" Generated by docutils manpage writer.
.\" 
.
